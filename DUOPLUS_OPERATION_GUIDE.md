# DuoPlus側必要操作ガイド

## 実運用前に必要な操作一覧

このガイドでは、SNS Marketing Automation Systemを実運用するために、DuoPlus側で実施する必要がある操作を詳しく説明します。

---

## 📋 操作の概要

実運用開始までに必要な作業は以下の通りです：

1. **デバイスの起動**（所要時間: 5分）
2. **デバイス名の確認と調整**（所要時間: 10分）
3. **プロキシ設定の実行**（所要時間: 5分）
4. **動作確認**（所要時間: 5分）

**合計所要時間: 約25分**

---

## 1. デバイスの起動

### 目的
プロキシ設定を行うには、対象デバイスが起動している必要があります。

### 手順

#### 方法A: このシステムから起動（推奨）
1. このシステムの「プロキシ」ページを開く
2. プロキシ一覧で「Powered Off」と表示されているデバイスを探す
3. 該当行の緑色の電源ボタン（起動アイコン）をクリック
4. 数秒待つと「Powered On」に変わる

#### 方法B: DuoPlusダッシュボードから起動
1. DuoPlusダッシュボード（https://my.duoplus.net/images）にログイン
2. デバイス一覧で停止中のデバイスを探す
3. デバイスの「起動」ボタンをクリック
4. デバイスが起動するまで待つ（通常30秒〜1分）

### 確認方法
- このシステムの「プロキシ」ページで「Powered On」と表示されていればOK
- または、DuoPlusダッシュボードでデバイスステータスが「Running」になっていればOK

### 注意事項
- **すべてのデバイスを起動する必要はありません**
- プロキシを設定したいデバイスのみ起動すればOKです
- 現在、Account #1のデバイスが停止中です

---

## 2. デバイス名の確認と調整

### 目的
このシステムは、アカウント名とDuoPlusデバイス名を照合して自動的にデバイスIDを取得します。名前が一致しない場合、手動で調整する必要があります。

### 現在の状況
- **デバイスID設定済み**: 5個（testuser, test_instagram, test_tiktok, test_twitter, test_facebook）
- **デバイスID未設定**: 29個

### 手順

#### ステップ1: DuoPlusでデバイス名を確認
1. DuoPlusダッシュボード（https://my.duoplus.net/images）にログイン
2. デバイス一覧を表示
3. 各デバイスの名前をメモまたはスクリーンショット

#### ステップ2: このシステムでアカウント名を確認
1. このシステムの「アカウント」ページを開く
2. アカウント一覧を確認
3. デバイスID列が「未設定」になっているアカウントをリストアップ

#### ステップ3: 名前を一致させる
以下のいずれかの方法で名前を一致させます：

**オプションA: DuoPlus側でデバイス名を変更（推奨）**
1. DuoPlusダッシュボードで対象デバイスを選択
2. デバイス設定またはプロパティを開く
3. デバイス名をこのシステムのアカウント名に変更
   - 例: デバイス名「Device001」→「test_new_account」に変更
4. 変更を保存

**オプションB: このシステム側でアカウント名を変更**
1. このシステムの「アカウント」ページで対象アカウントの「詳細」をクリック
2. アカウント編集画面でユーザー名を変更
3. DuoPlusのデバイス名と一致させる
   - 例: アカウント名「test_new_account」→「Device001」に変更
4. 変更を保存

**オプションC: 手動でデバイスIDを設定**
1. DuoPlusダッシュボードでデバイスIDを確認（例: snap_xxxxx）
2. このシステムのデータベース管理画面を開く
3. accountsテーブルで対象アカウントを検索
4. device_id列に手動でデバイスIDを入力
5. 保存

#### ステップ4: デバイスID同期を実行
1. このシステムの「アカウント」ページを開く
2. 「デバイスID同期」ボタンをクリック
3. 同期結果を確認
   - 成功件数が表示されます
   - 失敗した場合は、名前が一致していない可能性があります

### 確認方法
- アカウント一覧のデバイスID列に「snap_xxxxx」形式のIDが表示されていればOK
- 「未設定」が表示されている場合は、名前が一致していません

### ヒント
- **完全一致が必要**: 大文字小文字、スペース、アンダースコアなどすべて一致する必要があります
- **バッチ処理**: 複数のデバイス名を一度に変更してから同期すると効率的です
- **命名規則**: 今後のために、統一された命名規則を決めておくことをお勧めします
  - 例: `account_001`, `account_002`, ...
  - 例: `twitter_user1`, `facebook_user1`, ...

---

## 3. プロキシ設定の実行

### 目的
各デバイスにプロキシを設定して、IPアドレスを分散させます。

### 前提条件
- ✅ デバイスが起動している
- ✅ デバイスIDが設定されている
- ✅ プロキシが割り当てられている

### 手順

#### 方法A: 一括設定（推奨）
1. このシステムの「プロキシ」ページを開く
2. 「DuoPlusに同期」ボタンをクリック
3. 処理が完了するまで待つ（通常10〜30秒）
4. 成功メッセージを確認

#### 方法B: 個別設定
1. このシステムの「プロキシ」ページを開く
2. プロキシ一覧で「未設定」と表示されている行を探す
3. 該当行の「DuoPlusに設定」ボタンをクリック
4. 成功メッセージを確認
5. 他の未設定プロキシについても繰り返す

### 確認方法
- プロキシ一覧の「DuoPlus設定状況」列が「設定済み」になっていればOK
- DuoPlusダッシュボードでデバイスのプロキシ設定を確認することもできます

### トラブルシューティング

#### エラー: "デバイスが起動していません"
- **原因**: 対象デバイスが停止中
- **解決方法**: デバイスを起動してから再試行

#### エラー: "デバイスIDが未設定です"
- **原因**: アカウントにデバイスIDが紐付いていない
- **解決方法**: 「2. デバイス名の確認と調整」を実施

#### エラー: "プロキシが割り当てられていません"
- **原因**: アカウントにプロキシが割り当てられていない
- **解決方法**: 
  1. 「設定」ページでプロキシCSVをアップロード
  2. 「自動割り当て」ボタンをクリック

#### エラー: "DuoPlus APIエラー"
- **原因**: DuoPlus側の一時的な問題、またはAPIキーの問題
- **解決方法**: 
  1. 数分待ってから再試行
  2. 「設定」ページでDuoPlus API接続テストを実行
  3. 問題が続く場合は、APIキーを再確認

---

## 4. 動作確認

### 目的
すべての設定が正しく完了していることを確認します。

### チェックリスト

#### ✅ デバイスステータス
- [ ] すべての必要なデバイスが「Powered On」状態
- [ ] このシステムの「プロキシ」ページで確認

#### ✅ デバイスID設定
- [ ] すべてのアカウントにデバイスIDが設定されている
- [ ] このシステムの「アカウント」ページで確認
- [ ] デバイスID列に「snap_xxxxx」が表示されている

#### ✅ プロキシ設定
- [ ] すべてのプロキシが「設定済み」状態
- [ ] このシステムの「プロキシ」ページで確認
- [ ] DuoPlus設定状況列が「設定済み」

#### ✅ プロキシ割り当て
- [ ] すべてのアカウントにプロキシが割り当てられている
- [ ] このシステムの「アカウント」ページで確認
- [ ] プロキシ列に番号が表示されている

### 簡易動作テスト

#### テスト1: デバイス電源管理
1. 「プロキシ」ページで任意のデバイスの停止ボタン（赤色）をクリック
2. 数秒後に「Powered Off」に変わることを確認
3. 起動ボタン（緑色）をクリック
4. 数秒後に「Powered On」に戻ることを確認

#### テスト2: プロキシ設定
1. 「プロキシ」ページで「設定済み」のプロキシを1つ選ぶ
2. 該当行の「DuoPlusに設定」ボタンをクリック
3. 成功メッセージが表示されることを確認

#### テスト3: アカウント作成
1. 「アカウント」ページで「アカウント追加」をクリック
2. テストアカウント情報を入力
   - プラットフォーム: X (Twitter)
   - ユーザー名: test_operation_check
   - ステータス: 保留中
3. 「作成」をクリック
4. アカウント一覧に新しいアカウントが表示されることを確認
5. 必要に応じて削除

---

## 5. よくある質問（FAQ）

### Q1: デバイスを常に起動しておく必要がありますか？
**A**: いいえ。プロキシ設定を行う時と、実際に自動投稿を実行する時のみ起動していれば大丈夫です。使用しない時は停止してコストを節約できます。

### Q2: プロキシ設定は一度だけ実行すればいいですか？
**A**: はい。一度設定すれば、デバイスを停止・再起動しても設定は保持されます。プロキシ情報を変更したい場合のみ再設定が必要です。

### Q3: デバイス名を変更した後、何か追加の操作が必要ですか？
**A**: はい。このシステムの「アカウント」ページで「デバイスID同期」ボタンをクリックして、変更を反映させる必要があります。

### Q4: 34個すべてのアカウントにデバイスIDを設定する必要がありますか？
**A**: いいえ。実際に使用するアカウントのみ設定すればOKです。テストアカウントや重複アカウントは設定不要です。

### Q5: プロキシが足りない場合はどうすればいいですか？
**A**: 
1. 「設定」ページでプロキシCSVに追加のプロキシを入力
2. 「アップロード」をクリック
3. 「自動割り当て」をクリックして新しいプロキシを割り当て

### Q6: DuoPlusダッシュボードにログインできません
**A**: 
1. ログイン情報を確認
2. パスワードリセットを試す
3. DuoPlusサポートに連絡（support@duoplus.net）

### Q7: APIキーはどこで確認できますか？
**A**: DuoPlusダッシュボードの「Settings」→「API」セクションで確認できます。このシステムの「設定」ページにも表示されています（マスク表示）。

### Q8: 複数のプロキシを同じデバイスに設定できますか？
**A**: いいえ。1つのデバイスには1つのプロキシのみ設定できます。複数のIPアドレスを使いたい場合は、複数のデバイスを使用してください。

---

## 6. トラブルシューティング

### 問題: デバイスID同期で0件成功
**症状**: 「デバイスID同期」をクリックしても、成功件数が0件

**原因**: アカウント名とDuoPlusデバイス名が一致していない

**解決方法**:
1. DuoPlusダッシュボードでデバイス名を確認
2. このシステムのアカウント名と比較
3. どちらかを変更して一致させる
4. 「デバイスID同期」を再実行

---

### 問題: プロキシ設定が失敗する
**症状**: 「DuoPlusに設定」をクリックするとエラーメッセージが表示される

**原因と解決方法**:

**原因1: デバイスが停止中**
- デバイスを起動してから再試行

**原因2: デバイスIDが未設定**
- デバイス名を一致させてデバイスID同期を実行

**原因3: プロキシ情報が不正**
- プロキシのホスト、ポート、認証情報を確認
- 「設定」ページでプロキシCSVを再アップロード

**原因4: DuoPlus APIの問題**
- 「設定」ページでAPI接続テストを実行
- APIキーを確認
- 数分待ってから再試行

---

### 問題: デバイスステータスが表示されない
**症状**: プロキシ一覧のデバイスステータス列に「-」が表示される

**原因**: デバイスIDが未設定

**解決方法**:
1. 該当アカウントのデバイスIDを設定
2. ページをリロード
3. ステータスが表示されることを確認

---

### 問題: プロキシが自動割り当てされない
**症状**: 「自動割り当て」をクリックしても、プロキシが割り当てられない

**原因**: プロキシ数がアカウント数より少ない、または既に全て割り当て済み

**解決方法**:
1. 「設定」ページでプロキシ一覧を確認
2. 未割り当てのプロキシがあるか確認
3. 必要に応じて追加のプロキシをアップロード
4. 「自動割り当て」を再実行

---

## 7. 次のステップ

DuoPlus側の操作が完了したら、以下の手順で実運用を開始できます：

### ステップ1: プロジェクト作成
1. このシステムの「プロジェクト」ページを開く
2. 「新規プロジェクト作成」をクリック
3. プロジェクト情報を入力
   - プロジェクト名
   - 説明
   - 目標
4. 作成をクリック

### ステップ2: アカウント追加
1. 作成したプロジェクトを開く
2. 「アカウント追加」をクリック
3. 使用するアカウントを選択
4. 追加をクリック

### ステップ3: AI戦略生成
1. プロジェクト詳細ページで「戦略生成」をクリック
2. ターゲット情報を入力
   - ターゲットユーザー
   - 商品/サービス情報
   - マーケティング目標
3. 「生成」をクリック
4. AIが戦略を生成するまで待つ

### ステップ4: 自動投稿実行
1. 生成された戦略を確認
2. 投稿スケジュールを設定
3. 「自動投稿開始」をクリック
4. ログページで実行状況を確認

---

## 8. サポート情報

### このシステムに関する問題
- システムのバグや不具合
- 機能の使い方が分からない
- エラーメッセージの意味が分からない

→ システム開発者に連絡

### DuoPlusに関する問題
- ログインできない
- デバイスが起動しない
- APIキーが取得できない
- 課金や契約に関する質問

→ DuoPlusサポート（support@duoplus.net）

### プロキシに関する問題
- プロキシに接続できない
- プロキシの認証情報が分からない
- プロキシの追加購入

→ プロキシプロバイダーに連絡

---

## 9. まとめ

### 必須操作（実運用前に必ず実施）
1. ✅ デバイスの起動
2. ✅ デバイス名の確認と調整
3. ✅ デバイスID同期
4. ✅ プロキシ設定

### 推奨操作（効率化のため）
1. デバイス命名規則の統一
2. 使用しないアカウントの削除
3. 定期的なデバイスステータス確認

### 所要時間
- **初回セットアップ**: 約25分
- **2回目以降**: 約5分（デバイス起動とプロキシ設定のみ）

### 実運用可能な状態
すべての必須操作が完了すれば、すぐに実運用を開始できます。
